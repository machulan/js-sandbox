КРАТКО

1 Все переменные и параметры функций являются свойствами объекта переменных LexicalEnvironment. Каждый запуск функции создает новый такой объект. На верхнем уровне им является «глобальный объект», в браузере – window.

2 При создании функция получает системное свойство [[Scope]], которое ссылается на LexicalEnvironment, в котором она была создана.

3 При вызове функции, куда бы её ни передали в коде – она будет искать переменные сначала у себя, а затем во внешних LexicalEnvironment с места своего «рождения».

//////////////////////////////////////////////////////////////////
ЛЕКСИЧЕСКОЕ ОКРУЖЕНИЕ

LexicalEnvironment

//////////////////////////////////////////////////////////////////
ДОСТУП К ВНЕШНИМ ПЕРЕМЕННЫМ

var userName = "Вася";
function sayHi() {
  alert( userName ); // "Вася"
}

Интерпретатор, при доступе к переменной, сначала пытается найти переменную в текущем LexicalEnvironment, а затем, если её нет – ищет во внешнем объекте переменных. В данном случае им является window.

При создании функция получает скрытое свойство [[Scope]], которое ссылается на лексическое окружение, в котором она была создана.

sayHi.[[Scope]] = window

ОБОБЩЕНИЕ:
1 Каждая функция при создании получает ссылку [[Scope]] на объект с переменными, в контексте которого была создана.
2 При запуске функции создаётся новый объект с переменными LexicalEnvironment. Он получает ссылку на внешний объект переменных из [[Scope]].
3 При поиске переменных он осуществляется сначала в текущем объекте переменных, а потом – по этой ссылке.

ИЗ ВНЕШНЕЙ ОБЛАСТИ ВСЕГДА БЕРЕТСЯ ТЕКУЩЕЕ ЗНАЧЕНИЕ ПЕРЕМЕННОЙ

/////////////////////////////////////////////////////////////////////////
ВЛОЖЕННЫЕ ФУНКЦИИ

Вложенные функции получают [[Scope]] так же, как и глобальные. 

[[Scope]] -> {currentCount: 1} // currentCount находится во внешнем LE

[[Scope]] указывает на внешнее окружение.
LexicalEnvironment - на "внутреннее".

Переменную во внешней области видимости можно не только читать, но и изменять.

/////////////////////////////////////////////////////////////////////////
СВОЙСТВА ФУНКЦИИ

Фукнция - объект. 

function f() {}
f.test = 5;
alert( f.test );

Иногда свойства, привязанные к функции, называют «статическими переменными».

////////////////////////////////////////////////////////////////////////